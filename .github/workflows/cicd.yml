name: CI/CD

on:
  push:
    branches:
      - main
      - terraform
    paths-ignore:
      - '*.md'
  workflow_dispatch:

jobs:
  ci:
    name: CI
    uses: ./.github/workflows/ci.yml

  deploy:
    name: Deploy
    needs: ci
    uses: ./.github/workflows/deploy.yml
    secrets:
      AZURE_CREDENTIALS: ${{ secrets.AZURE_CREDENTIALS }}